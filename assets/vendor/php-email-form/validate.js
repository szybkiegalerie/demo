(function(){"use strict";let n=document.querySelectorAll(".php-email-form");n.forEach(function(n){n.addEventListener("submit",function(n){n.preventDefault();let s=this,o=s.getAttribute("action"),a=s.getAttribute("data-recaptcha-site-key");if(!o){e(s,"The form action property is not set!");return}s.querySelector(".loading").classList.add("d-block"),s.querySelector(".error-message").classList.remove("d-block"),s.querySelector(".sent-message").classList.remove("d-block");let i=new FormData(s);a?typeof grecaptcha!="undefined"?grecaptcha.ready(function(){try{grecaptcha.execute(a,{action:"php_email_form_submit"}).then(e=>{i.set("recaptcha-response",e),t(s,o,i)})}catch(t){e(s,t)}}):e(s,"The reCaptcha javascript API url is not loaded!"):t(s,o,i)})});function t(t,n,s){fetch(n,{method:"POST",body:s,headers:{"X-Requested-With":"XMLHttpRequest"}}).then(e=>{if(e.ok)return e.text();throw new Error(`${e.status} ${e.statusText} ${e.url}`)}).then(e=>{if(t.querySelector(".loading").classList.remove("d-block"),e.trim()=="OK")t.querySelector(".sent-message").classList.add("d-block"),t.reset();else throw new Error(e||"Form submission failed and no error message returned from: "+n)}).catch(n=>{e(t,n)})}function e(e,t){e.querySelector(".loading").classList.remove("d-block"),e.querySelector(".error-message").innerHTML=t,e.querySelector(".error-message").classList.add("d-block")}})()